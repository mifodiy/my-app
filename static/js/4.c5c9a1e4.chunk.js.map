{"version":3,"sources":["hoc/withAuthRedirect.js","components/Profile/ProfileContainer.js"],"names":["mapStateToPropsRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","ProfileContainer","userId","match","params","authtorizeUserId","history","push","getProfileUsers","getStatus","refreshUser","prevProps","prevState","snapshot","isOwner","compose","profileInfo","profilePage","status","updateStatus","savePhoto","saveProfileInfo","withRouter"],"mappings":"0LAIIA,EAA0B,SAACC,GAC3B,MAAM,CACFC,OAAQD,EAAME,KAAKD,SAcZE,IAXU,SAACC,GAAe,IAC/BC,EAD8B,4JAEhC,WACI,OAAKC,KAAKC,MAAMN,OACT,cAACG,EAAD,eAAeE,KAAKC,QADI,cAAC,IAAD,CAAUC,GAAI,eAHjB,GACJC,IAAML,WAOtC,OADqCM,YAAQX,EAARW,CAAiCL,K,4JCRpEM,E,iKACF,WACI,IAAIC,EAASN,KAAKC,MAAMM,MAAMC,OAAOF,OAChCA,IACDA,EAASN,KAAKC,MAAMQ,mBAEhBT,KAAKC,MAAMS,QAAQC,KAAK,UAGhCX,KAAKC,MAAMW,gBAAgBN,GAC3BN,KAAKC,MAAMY,UAAUP,K,+BAEzB,WACIN,KAAKc,gB,gCAGT,SAAmBC,EAAWC,EAAWC,GAClCjB,KAAKC,MAAMM,MAAMC,OAAOF,QAAUS,EAAUR,MAAMC,OAAOF,QACxDN,KAAKc,gB,oBAIb,WACI,OAAM,cAAC,IAAD,2BAAad,KAAKC,OAAlB,IACFiB,SAAUlB,KAAKC,MAAMM,MAAMC,OAAOF,c,GAxBfH,IAAML,WAqCtBqB,sBACXf,aAVoB,SAACV,GACrB,MAAO,CACH0B,YAAa1B,EAAM2B,YAAYD,YAC/BE,OAAQ5B,EAAM2B,YAAYC,OAC1Bb,iBAAkBf,EAAME,KAAKU,OAC7BX,OAAQD,EAAME,KAAKD,UAKC,CAACiB,oBAAiBC,cAAWU,iBAAcC,cAAWC,sBAC9EC,IACA7B,IAHWsB,CAIbd","file":"static/js/4.c5c9a1e4.chunk.js","sourcesContent":["import React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\n\nlet mapStateToPropsRedirect = (state) =>{\n    return{\n        isAuth: state.auth.isAuth\n    }\n}\nconst withAuthRedirect = (Component) => {\n    class RedirectComponent extends React.Component{\n        render() {\n            if (!this.props.isAuth){return <Redirect to={'/login'}/>}\n            return <Component {...this.props}/>\n        }\n    }\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsRedirect)(RedirectComponent)\n    return ConnectedAuthRedirectComponent;\n}\n\nexport default withAuthRedirect;","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport Profile from \"./Profile\";\nimport {getProfileUsers, getStatus, savePhoto, saveProfileInfo, updateStatus} from \"../../redux/profile-reducer\";\nimport {withRouter} from \"react-router\";\nimport withAuthRedirect from \"../../hoc/withAuthRedirect\";\nimport {compose} from \"redux\";\n\nclass ProfileContainer extends React.Component{\n    refreshUser() {\n        let userId = this.props.match.params.userId\n        if (!userId) {\n            userId = this.props.authtorizeUserId\n            if (!userId){\n                this.props.history.push('/login')\n            }\n        }\n        this.props.getProfileUsers(userId)\n        this.props.getStatus(userId)\n    }\n    componentDidMount() {\n        this.refreshUser()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(this.props.match.params.userId != prevProps.match.params.userId){\n            this.refreshUser()\n        }\n    }\n\n    render() {\n        return<Profile {...this.props}\n            isOwner={!this.props.match.params.userId}/>\n    }\n}\n\nconst mapStateToProps = (state) =>{\n    return {\n        profileInfo: state.profilePage.profileInfo,\n        status: state.profilePage.status,\n        authtorizeUserId: state.auth.userId,\n        isAuth: state.auth.isAuth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps,{getProfileUsers, getStatus, updateStatus, savePhoto, saveProfileInfo}),\n    withRouter,\n    withAuthRedirect\n)(ProfileContainer)\n"],"sourceRoot":""}